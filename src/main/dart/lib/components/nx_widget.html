<link rel="import" href="tree/nx_tree.html">
<polymer-element name="nx-widget">

  <template>
      <link rel="stylesheet"  href="../css/semantic.css" no-shim>
      <link rel="stylesheet"  href="../css/style.css" no-shim>
        <div class="ui input">
        <!-- Document(s) -->
        <template if="{{type == 'document' || type == 'documents'}}">
          <div class="ui action input">
            <input id="widget" type="text" value="{{value}}" required?="{{required}}"/>
            <div class="ui icon button" on-click="{{showModal}}"><i class="open folder outline icon"></i></div>
          </div>
          <div class="ui modal">
            <i class="close icon"></i>
            <div class="header">
              Pick {{type}}:
            </div>
            <div class="content">
              <div class="ui segment">

              <!-- TODO(nfgs): Do not hardcode connectionId -->
              <nx-tree root="/default-domain"
                       key="{{(datatype == 'document' || datatype == 'documents') ? 'uid' : datatype}}"
                       multipleSelection="{{type == 'documents'}}"
                       selected="{{value}}"
                       connectionId="connection"></nx-tree>
              </div>
            </div>
            <div class="actions">
              <div class="ui button">Cancel</div>
              <div class="ui button">OK</div>
            </div>
          </div>

        </template>
          
        <template if="{{type == 'text'}}">

         <!-- Checkbox -->
          <template if="{{datatype == 'boolean'}}"> 
            <div class="ui checkbox">
              <input id="widget" type="checkbox"/>
              <label for="widget"></label>
            </div>
          </template>
          <!-- Text input -->
          <template if="{{datatype == 'string'}}"> 
            <input id="widget" type="text" value="{{value}}" required?="{{required}}"/>
          </template>
        </template>
        
        <!-- Blob -->
        <template if="{{type == 'blob'}}">
          <input id="widget" type="file" name="file" on-change="{{onFileSelected}}" required?="{{required}}">
          <div hidden?="{{value == null}}">
            <div>Size: {{value.length | asFileSize}}.</div>
          </div>
        </template>
      </div>
  </template>
  <script type="application/dart;component=1" src="nx_widget.dart"></script>
</polymer-element>