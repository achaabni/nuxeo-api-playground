<link rel="import" href="ui_sidebar.html">
<polymer-element name="nx-structures-browser">
  <template>
    <!-- Sidebar -->
    <div class="ui large floating vertical sidebar menu active">
      <!-- Navigation -->
      <a class="ui red inverted header item">
        <i class="home icon"></i>
        {{title}}
      </a>
      <!-- Search -->
      <div class="item">
        <div class="ui icon input">
          <input type="search" class="form-control" value="{{searchTerm}}" placeholder="Search...">
          <i class="search icon"></i>
        </div>
      </div>
      
      <!-- Schemas, Facets and Doctypes -->
      <div class="ui fluid blue accordion" style="overflow:hidden">
       
        <template repeat="{{type in items.keys}}">                    
          <div class="title">{{type}}</div>
          <div class="content" style="padding:0">
            <div class="ui small animated list">
              <template repeat="{{item in items[type] | filter(searchFilter) | sort('name')}}">
                  <div class="item">
                    <div class="content">
                      <div on-click="{{select}}" data-id="{{type}}-{{item.name}}">{{item.name}}</div>
                    </div>
                  </div>
              </template>
            </div>
          </div>
        </template>
        
      </div>
    </div>
    
    <!-- Main page -->
    <div class="ui page grid">
      <div id="main" class="column">
        
        <!-- Breadcrumb -->
        <div class="ui segment">
         <div class="ui breadcrumb">
          <a class="section" on-click="{{goHome}}"><i class="ui home icon"></i></a>
          <div class="divider"> / </div>
          <a class="section" on-click="{{goRoot}}">{{title}}</a>
          <template if="{{selection}}">
            <div class="divider"> / </div>
            <div class="active section">{{selection.type}}</div>
            <div class="divider"> / </div>
            <div class="active section">{{selection.item.name}}</div>
          </template>
        </div>
       </div>
        
        <template if="{{selection == null}}">
          <div class="ui raised segment">
            <h3 class="ui blue header">{{title}}</h3>
            <div class="ui grid">
              <div class="four wide column"><img class="ui medium image" src="{{icon}}"></div>
              <div class="twelve wide column">
                <p class="description">{{description}}</p>
              </div>
            </div>
          </div>
        </template>  
        
        <template if="{{selection}}">
          <div class="ui huge header">{{selection.item.name}}</div> 
          
          <!-- Schema -->
          <template if="{{selection.type == 'schemas'}}">
            
            <template if="{{selection.item.prefix.isNotEmpty}}">
              <div class="ui label">
                PREFIX: {{selection.item.prefix}}
              </div>
            </template>
            
            <br/>
            
            <table class="ui large basic blue table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Type</th>
                </tr>
              </thead>
              <tbody>
                <tr template repeat="{{field in selection.item.fields | sort('name')}}">
                  <td>{{field.name}}</td>
                  <td>{{field.type}}</td>
                </tr>
              </tbody>
            </table>
    
         </template>
          
          <!-- Facet -->
          <template if="{{selection.type == 'facets'}}">

            <div class="ui medium header">Related schemas</div>
            <template repeat="{{schema in selection.item.schemas}}">
              <a class="link" on-click="{{select}}" data-id="schemas-{{schema}}">{{schema}}</a>
            </template>
            
         </template>
         
          <!-- Doctype -->
          <template if="{{selection.type == 'types'}}">
            
            <template if="{{selection.item.parent}}">
              <i id="diagram" class="sitemap icon link"></i>
              <div class="ui label">
                EXTENDS: <a style="color:#00adff;" on-click="{{select}}" data-id="types-{{selection.item.parent}}">{{selection.item.parent}}</a>
              </div>
            </template>
            
            <div class="ui medium header">Schemas</div>
            <template repeat="{{schema in selection.item.schemas}}">
              <a class="link" on-click="{{select}}" data-id="schemas-{{schema}}">{{schema}}</a>
            </template>
            
            <div class="ui medium header">Facets</div>
            <template repeat="{{facet in selection.item.facets}}">
              <a class="link" on-click="{{select}}" data-id="facets-{{facet}}">{{facet}}</a>
            </template>
            
         </template>
         
        </template>           
      </div>
    </div>
    
  </template>
  <script type="application/dart;component=1" src="nx_structures_browser.dart"></script>

</polymer-element>
